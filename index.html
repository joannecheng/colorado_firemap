<!DOCTYPE html>
<head>
  <title>
    Colorado Wildfires
  </title>
</head>
<meta charset="utf-8">
  <style>
    .container {
      width: 960px;
      height: 1000px;
    }

    .fires {
      stroke: #660000;
      stroke-width: 1px;
      fill: #FC9272;
      opacity: 0.80;
    }

    .states { 
      stroke: steelblue;
      fill: #fff;
      stroke-width: 0.5px;
    }

    text {
      font: 16px sans-serif;
      text-shadow: 0 1px 0 #fff, 0 -1px 0 #fff, -1px 0 0 #fff, 1px 0 0 #fff;
    }
    
  </style>
  <body>    
    <!--script src="http://d3js.org/d3.v3.min.js"></script>
  <script src="http://d3js.org/topojson.v0.min.js"></script>  -->

    <script src="vendor/d3.js"></script>
    <script src="vendor/topojson.js"></script>    
    <script>
      var width = 960;
      var height = 700;
      
        //.scale(4700)
      var projection = d3.geo.mercator()
        .scale(80000)
        .center([-105.37, 40.09376])
        .translate([width/2, height/2]);

      var path = d3.geo.path()
        .projection(projection);
      
      var svg = d3.select("body")
        .append('div')
        .attr('class', 'container')
        .append("svg")
        .attr("width", width)
        .attr("height", height);
      
      var showTextOnMouseover = function(event, ui) {
        svg.selectAll('text.fire' + ui)
          .attr('display', 'block');
      }

      var hideTextOnMouseover = function(event, ui) {
        svg.selectAll('text.fire' + ui)
          .attr('display', 'none');
      }

      d3.json('topo_boulder_wildfires.json', function(err, data){
        svg.append("path")
          .datum(topojson.object(data, data.objects.boulder_streets))
          .attr('d', path)
          .attr('class', 'states');
          
        svg.selectAll('path.fires')
          .data(topojson.object(data, data.objects.boulder_wildfires).geometries)
          .enter().append('path')
          .attr('d', path)
          .attr('class', function(d, i) { return 'fires fire' + i })
          .on('mouseover', showTextOnMouseover)
          .on('mouseout', hideTextOnMouseover);

        svg.selectAll('text')
          .data(topojson.object(data, data.objects.boulder_wildfires).geometries)
          .enter().append('text')
          .attr("transform", function(d) { return "translate(" + path.centroid(d) + ")"})
          .text(function(d) { return d.properties.NAME })
          .attr('class', function(d, i) { return 'fire' + i })
          .attr('display', 'none')

      });
      
    </script>  
  </body>
</html>
